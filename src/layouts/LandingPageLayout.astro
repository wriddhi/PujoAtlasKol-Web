---
import '@fontsource-variable/inter/wght.css';
import '@fontsource-variable/work-sans';
import '@fontsource-variable/noto-sans-bengali';
import '@fontsource-variable/alkatra';
import interWoff2 from '@fontsource-variable/inter/files/inter-latin-wght-normal.woff2?url';
import workSansWoff2 from '@fontsource-variable/work-sans/files/work-sans-latin-wght-normal.woff2?url';
import notoSansWoff2 from '@fontsource-variable/noto-sans-bengali/files/noto-sans-bengali-latin-wght-normal.woff2?url';
import alkatraWoff2 from '@fontsource-variable/alkatra/files/alkatra-latin-wght-normal.woff2?url';

import Header from '@/components/shared/Header.astro';
import Footer from '@/components/shared/Footer.astro';
import { cn } from '@/libs/utils';
import { ViewTransitions } from 'astro:transitions';
import { LargeNavbar } from '@/components/shared/Navbar';

const currentPath = Astro.url.pathname;

type Props = {
  title?: string;
  description?: string;
  image?: string;
};

const {
  image = currentPath.split('/').includes('bn') ? '/open-graph/bn.png' : '/open-graph/en.png',
  title = 'Pujo Atlas - Interactive Maps and Real-Time Updates for Durga Puja',
  description = 'Discover the best Pandals with Pujo Atlas! Real-time updates, interactive maps and emergency helplines, for the ultimate Durga Puja Porikormo experience in Kolkata.',
} = Astro.props as Props;
---

<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />

    <!-- OG tags -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={currentPath} />
    <meta property="og:image" content={image} />
    <meta property="og:site_name" content="Pujo Atlas" />
    <meta property="og:locale" content="en_IN" />

    <!-- twitter meta tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={image} />
    <meta name="twitter:site" content="@PujoAtlas" />

    <!-- Link tags -->
    <link rel="preload" as="font" type="font/woff2" href={workSansWoff2} crossorigin="anonymous" />
    <link rel="preload" as="font" type="font/woff2" href={alkatraWoff2} crossorigin="anonymous" />
    <link rel="preload" as="font" type="font/woff2" href={interWoff2} crossorigin="anonymous" />
    <link rel="preload" as="font" type="font/woff2" href={notoSansWoff2} crossorigin="anonymous" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={description} />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <meta
      name="keywords"
      content="Durga Puja, Kolkata Puja, Calcutta Puja, Pujo Map, Calcutta Pujo Map, Kolkata Pujo Map, Puja Map, Calcutta Puja Map, Kolkata Puja Map, Pujo Directions, Calcutta Pujo Directions, Kolkata Pujo Directions, Puja Directions, Calcutta Puja Directions, Kolkata Puja Directions, Pandal map, real-time Puja updates, emergency helplines, Calcutta emergency helplines, Kolkata transit guide, Calcutta transit guide, Durga Puja celebrations, Calcutta Durga Puja celebrations, Kolkata Durga Puja celebrations, explore Puja, explore Calcutta Puja, explore Kolkata Puja, interactive maps, Pandal locations, Puja 2024, Calcutta Puja 2024, Kolkata Puja 2024, Porikormo, Calcutta Porikormo, Kolkata Porikormo, ABP Ananda Pujo, Calcutta ABP Ananda Pujo, Kolkata ABP Ananda Pujo, Shashti, Sasthi, Sashthi, Saptami, Saptomi, Shaptami, Maha Ashtami, Mahashtami, Mahashthami, Ashtami, Nabami, Navami, Dashami, Bijoya Dashami, Calcutta Bijoya Dashami, Kolkata Bijoya Dashami, Bijoya, Dussehra, Navaratri, Calcutta Navaratri, Kolkata Navaratri, Pujo Parikrama, Puja Parikrama, Calcutta Pujo Parikrama, Kolkata Pujo Parikrama, Calcutta Puja Parikrama, Kolkata Puja Parikrama, Durga Ma, Ma Durga, Dhunuchi Naach, Sindoor Khela, Shubho Mahalaya, Calcutta Shubho Mahalaya, Kolkata Shubho Mahalaya, Anjali, Pujo Guide, Pujo Events, Subho Bijaya, Subho Bijoya, Calcutta Subho Bijaya, Kolkata Subho Bijaya, Calcutta Subho Bijoya, Kolkata Subho Bijoya"
    />
    <ViewTransitions />
    <title>{title}</title>
    <!-- Google tag (gtag.js) -->
    <script
      type="text/partytown"
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-56WWMK6TC4"
      is:inline></script>
    <script type="text/partytown" is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        // eslint-disable-next-line prefer-rest-params
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-56WWMK6TC4');
    </script>
    <!-- Google tag (gtag.js) -->
  </head>
  <body
    class={cn(
      'bg-secondary-background lg:overflow-hidden',
      'text-primary-foreground [&_*]:text-primary-foreground',
      '[&_*::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar]:w-2',
      '[&_*::-webkit-scrollbar-track]:bg-secondary-background',
      '[&::-webkit-scrollbar-track]:bg-secondary-background',
      '[&_*::-webkit-scrollbar-thumb]:bg-primary-foreground',
      '[&::-webkit-scrollbar-thumb]:bg-primary-foreground',
      'min-w-screen min-h-screen flex flex-col justify-between overflow-x-hidden',
      '[&_*::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar]:w-2',
      '[&_*::-webkit-scrollbar-track]:bg-secondary-background [&::-webkit-scrollbar-track]:bg-secondary-background',
      '[&_*::-webkit-scrollbar-thumb]:bg-primary-foreground [&::-webkit-scrollbar-thumb]:bg-primary-foreground',
    )}
  >
    <Header />
    <div class="flex flex-1 h-full lg:max-h-[85vh]">
      <aside class="hidden lg:grid place-items-center relative px-10">
        <span class="fixed top-1/2 -translate-y-1/2">
          <LargeNavbar path={currentPath} />
        </span>
      </aside>
      <slot />
    </div>
    <Footer />
  </body>
</html>
